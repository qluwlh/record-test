(this["webpackJsonprecord-client"]=this["webpackJsonprecord-client"]||[]).push([[0],{30:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(0),a=n.n(c),i=n(11),o=n.n(i),s=(n(30),n(10)),u=n.n(s),d=n(20),l=n(9),j=n(56),b=n(59),f=n(58),O=n(60),p=Object(j.a)((function(e){return{root:{flexGrow:1,padding:e.spacing(2)},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},camera:{display:function(e){return e.showCamera?"block":"none"}},screen:{display:function(e){return e.showScreen?"block":"none"}}}})),v="video/webm";var h=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),n=Object(c.useState)(!0),a=Object(l.a)(n,2),i=a[0],o=a[1],s=Object(c.useState)(!0),j=Object(l.a)(s,2),h=j[0],m=j[1],x=p({showCamera:i,showScreen:h}),g=Object(c.useState)(!1),y=Object(l.a)(g,2),w=(y[0],y[1]),k=Object(c.useState)(12800),R=Object(l.a)(k,2),S=R[0],C=(R[1],Object(c.useState)(127e4)),L=Object(l.a)(C,2),U=L[0],B=(L[1],Object(c.useState)(127e4)),P=Object(l.a)(B,2),D=P[0],M=(P[1],Object(c.useRef)(null)),N=(Object(c.useRef)(null),Object(c.useRef)(null)),T=(Object(c.useRef)(null),Object(c.useRef)([])),E=Object(c.useRef)([]),F=Object(c.useState)(!1),A=Object(l.a)(F,2),I=A[0],J=A[1],G=function(e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="camera.webm",n.click(),URL.revokeObjectURL(n.href)},q=function(e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="screen.webm",n.click(),URL.revokeObjectURL(n.href)},z=function(e){var t=new MediaRecorder(e,{audioBitsPerSecond:S,videoBitsPerSecond:U,mimeType:v});M.current=t,t.ondataavailable=function(e){T.current&&T.current.push(e.data)},t.onstop=function(){var e=new Blob(T.current,{type:v});G(e)},t.onerror=console.log},H=function(e){var t=new MediaRecorder(e,{audioBitsPerSecond:12800,videoBitsPerSecond:D,mimeType:v});N.current=t,t.ondataavailable=function(e){E.current&&E.current.push(e.data)},t.onstop=function(){var e=new Blob(E.current,{type:v});q(e)},t.onerror=console.log};Object(c.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then((function(e){return e.filter((function(e){return"videoinput"===e.kind}))[0]})).then((function(e){return navigator.mediaDevices.getUserMedia({video:e})})).then(function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.current&&(e.current.srcObject=n,e.current.onloadedmetadata=function(t){e.current&&e.current.play()}),t.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){return e.getAudioTracks()[0]}));case 3:return r=t.sent,n.addTrack(r),z(n),t.abrupt("return",null);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(console.log)}),[]);var K=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!1),J(!1),M.current&&M.current.stop(),N.current&&N.current.stop();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0,cursor:"always"}).then(function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current&&(t.current.srcObject=n,t.current.onloadedmetadata=function(e){t.current&&t.current.play()}),H(n),e.abrupt("return",null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(console.log)}),[]),Object(r.jsx)("div",{className:x.root,children:Object(r.jsxs)(f.a,{container:!0,spacing:3,children:[Object(r.jsx)(f.a,{item:!0,xs:4,children:Object(r.jsxs)(b.a,{className:x.paper,children:[Object(r.jsx)("video",{src:"",ref:e,width:"100%",className:x.camera,autoPlay:!0}),Object(r.jsx)("div",{style:{margin:16},children:Object(r.jsx)(O.a,{onClick:function(){return o(!i)},variant:"contained",color:"secondary",children:i?"\u9690\u85cf\u6444\u50cf\u5934":"\u5c55\u793a\u6444\u50cf\u5934"})})]})}),Object(r.jsx)(f.a,{item:!0,xs:4,children:Object(r.jsxs)(b.a,{className:x.paper,children:[Object(r.jsx)("video",{src:"",ref:t,width:"100%",className:x.screen,autoPlay:!0}),Object(r.jsx)("div",{style:{margin:16},children:Object(r.jsx)(O.a,{onClick:function(){return m(!h)},variant:"contained",color:"secondary",children:h?"\u9690\u85cf\u5c4f\u5e55":"\u5c55\u793a\u5c4f\u5e55"})})]})}),Object(r.jsx)(f.a,{item:!0,xs:4,children:Object(r.jsx)(b.a,{className:x.paper,children:Object(r.jsxs)("div",{style:{margin:16,display:"flex",justifyContent:"center"},children:[Object(r.jsx)("div",{children:I&&"\u5f55\u5236\u4e2d"}),Object(r.jsx)("div",{style:{margin:16},children:Object(r.jsx)(O.a,{onClick:function(){w(!0),J(!0),M.current&&M.current.start(3e3),N.current&&N.current.start(3e3)},variant:"contained",color:"secondary",children:"\u5f00\u59cb"})}),Object(r.jsx)("div",{style:{margin:16},children:Object(r.jsx)(O.a,{onClick:K,variant:"contained",color:"secondary",children:"\u7ed3\u675f"})})]})})})]})})},m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(h,{})}),document.getElementById("root")),m()}},[[36,1,2]]]);
//# sourceMappingURL=main.1024222f.chunk.js.map